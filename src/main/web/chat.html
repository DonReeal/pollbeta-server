<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Pollbus</title>

  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.7/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.7/angular-animate.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.7/angular-route.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.7/angular-resource.js"></script>

  <script src="baratine-js.js"></script>

</head>

<body ng-app="chat">
    <!-- my data are here -->
  <div ng-controller="chatController">
    <h1> {{ title }} <span>{{ pipeStr }}{{ sessionInfo }}</span></h1>
    <div>/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</div>
    <form ng-class="userForm" role="form">
      <div class="form-group">
        <input ng-model="userName" type="text" class="form-control" id="user"
               placeholder="Enter user name" ng-show="!loggedIn">
      </div>
      <div class="form-group">
        <input ng-model="userPassword" type="password" class="form-control"
               id="password" placeholder="Password" ng-show="!loggedIn">
      </div>
      <button type="submit" class="btn btn-default"
              ng-click="login()" ng-disabled=" loggingIn " ng-show="!loggedIn">Sign in
      </button>
      
      <button type="submit" class="btn btn-default"
              ng-click="logout()" ng-disabled="!loggedIn" ng-show="loggedIn">
        Logout
      </button> 
    </form>
    <div>/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</div>
    

    <div>Joined Channels:</div>
    <ul>
      <li ng-repeat="(id, channel) in channels | orderBy: 'id'">{{channel}}</li>
    </ul>
  
    
    <form ng-class="userForm" role="form">
      <div class="form-group">
        <input ng-model="channelId" type="text" class="form-control" id="user"
               placeholder="Enter channel to enter ..." ng-show="loggedIn">
      </div>
      <button type="submit" class="btn btn-default"
              ng-click="joinChannel()" ng-disabled="!loggedIn" ng-show="loggedIn">Join
      </button>
      <button type="submit" class="btn btn-default"
              ng-click="leaveChannel()" ng-disabled="!loggedIn" ng-show="loggedIn">LeaveChannel
      </button>  
    </form>

    <div>/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////</div>
    
    
    <!-- TODO: CHAT FORMS :::-->

    <form ng-class="userForm" role="form">
      <div class="form-group" ng-repeat="channel in channels">
        <div>> CHANNEL: {{channel.id}}</div>
        <ng-form>
          <div ng-repeat="message in channel.messages">
            <div>{{message.user}}: {{message.txt}}</div> 
          </div>
          <input ng-model="channel.message" type="text" class="form-control" id="message"
                   placeholder="Type your message here ..." ng-show="loggedIn">
          <button type="submit" class="btn btn-default"
                  ng-click="channel.msg()" ng-disabled="channel.isSending" ng-show="loggedIn">Send
          </button>
        </ng-form>
        <hr/>
      </div>
    </form>
    
  </div>

  <!-- IMPORTS-->
  <!-- modules -->
  <script src="chat.js"></script>
  <!-- controllers -->
  <script src="chatController.js"></script>

  <!-- SERVICES -->
  <!-- <script src="chatService.js"></script> -->

  
</body>


</html>

